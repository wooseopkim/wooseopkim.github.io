---
import { defaultLocale } from '@lib/i18n';
---

<noscript>
  <meta http-equiv="refresh" content={`0; url=./${defaultLocale}`} />
</noscript>

<script>
  import { defaultLocale, localeNames, type LocaleName } from '@lib/i18n';

  const { language } = navigator;

  function matchLanguage(language: string) {
    if (localeNames.has(language as LocaleName)) {
      return language;
    }
    return defaultLocale;
  }

  const locale = matchLanguage(language);

  location.href = `./${locale}`;
</script>
